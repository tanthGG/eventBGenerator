<Pattern name="PReceiveUnit">
  <Variables>
    <Variable name="ctlRecvFlg" type="ND \ Dests → BOOL"/>
    <Variable name="inBuff"     type="ND \ Dests → ℙ(ℤ)"/>
  </Variables>

  <Invariants>
    <Invariant expression="ctlRecvFlg ∈ ND \ Dests → BOOL"/>
    <Invariant expression="inBuff ∈ ND \ Dests → ℙ(ℤ)"/>
  </Invariants>

  <Events>
    <Event name="receive">
      <Parameters>
        <Param name="x"  type="ND \ Dests"/>
        <Param name="sf" type="BOOL"/>
      </Parameters>
      <Guards>
        <Guard expression="x ∈ ND \ Dests"/>
        <Guard expression="sf ∈ BOOL"/>
      </Guards>
      <Actions>
        <Action value="ctlRecvFlg(x) ≔ sf"/>
        <Action value="inBuff(x) ≔ inBuff(x) ∪ {2}"/>
      </Actions>
    </Event>
  </Events>
</Pattern>
